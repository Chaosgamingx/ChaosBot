"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.important=exports.getInfo=exports.validate=void 0;const Attachment_1=require("./internal/Attachment"),URL_REGEX=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/,formats=["audio/","video/"],validate=str=>str.length<2083&&URL_REGEX.test(str);exports.validate=validate;const getInfo=query=>__awaiter(void 0,void 0,void 0,(function*(){var _a;const data=yield Attachment_1.Attachment(query).catch(()=>{});return data&&formats.some(x=>data.format.startsWith(x))?{playlist:null,info:[{title:(null!==(_a=data.url.split("/").filter(x=>x.length).pop())&&void 0!==_a?_a:"Attachment").split("?")[0].trim(),duration:0,thumbnail:"https://upload.wikimedia.org/wikipedia/commons/2/2a/ITunes_12.2_logo.png",engine:data.url,views:0,author:data.stream.client.servername,description:data.stream.client.servername,url:data.url}]}:null}));exports.getInfo=getInfo,exports.important=!0;